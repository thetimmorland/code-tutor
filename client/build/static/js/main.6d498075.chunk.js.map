{"version":3,"sources":["Share.js","CreateSketch.js","Sketch.js","Editor.js","Log.js","Ide.js","App.js","serviceWorker.js","index.js"],"names":["socket","WebSocket","window","location","protocol","host","connection","ShareDB","Connection","ShareContext","createContext","useShare","useContext","Share","children","id","useParams","useState","value","setValue","docRef","useRef","useEffect","current","get","subscribe","err","data","on","destroy","type","to","Provider","submitOp","op","console","log","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","CreateSketch","classes","setId","axios","then","res","Backdrop","className","open","CircularProgress","bridgeScript","replace","Sketch","setLog","eventHandler","message","source","payload","addEventListener","removeEventListener","srcDoc","DOMParser","parseFromString","style","createElement","innerHTML","head","appendChild","p5","src","bridge","sketch","title","documentElement","outerHTML","frameBorder","width","height","sandbox","Editor","code","codeRef","mode","defaultValue","tabSize","onChange","newValue","diff","diffChars","offset","forEach","count","added","removed","p","si","sd","debounceChangePeriod","annotations","list","overflow","text","fontFamily","whiteSpace","Log","atBottom","setAtBottom","logRef","scrollTop","scrollHeight","List","ref","onScroll","event","target","offsetHeight","map","entry","idx","ListItem","dense","divider","key","ListItemText","primaryTypographyProps","primary","root","display","main","flexGrow","appBarSpacer","flexShrink","mixins","toolbar","content","leftColumn","flexDirection","rightColumn","editorContainer","logContainer","paper","Ide","setSketch","AppBar","Toolbar","IconButton","edge","onClick","PlayArrow","Stop","Paper","variant","App","CssBaseline","exact","path","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.6d498075.chunk.js","sourcesContent":["import React, {\n  useEffect,\n  useRef,\n  useState,\n  createContext,\n  useContext,\n} from \"react\";\n\nimport WebSocket from \"reconnecting-websocket\";\nimport ShareDB from \"sharedb/lib/client\";\nimport { useParams, Redirect } from \"react-router-dom\";\n\nconst socket = new WebSocket(\n  (window.location.protocol === \"https:\" ? \"wss://\" : \"ws://\") +\n    (process.env.NODE_ENV == \"production\"\n      ? window.location.host\n      : \"localhost:8080\") +\n    \"/websocket\"\n);\n\nconst connection = new ShareDB.Connection(socket);\n\nconst ShareContext = createContext(null);\n\nexport function useShare() {\n  return useContext(ShareContext);\n}\n\nexport default function Share({ children }) {\n  const { id } = useParams();\n  const [value, setValue] = useState();\n  const docRef = useRef(null);\n\n  useEffect(() => {\n    docRef.current = connection.get(\"collection\", id);\n\n    docRef.current.subscribe((err) => {\n      if (err) throw err;\n\n      setValue({ ...docRef.current.data });\n\n      docRef.current.on(\"op\", () => {\n        setValue({ ...docRef.current.data });\n      });\n    });\n\n    return () => {\n      docRef.current.destroy();\n    };\n  }, [id]);\n\n  const submitOp = (op) => {\n    console.log(op);\n    docRef.current.submitOp(op);\n  };\n\n  if (docRef.current && !docRef.current.type) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    docRef.current && (\n      <ShareContext.Provider value={{ value, submitOp }}>\n        {children}\n      </ShareContext.Provider>\n    )\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n}));\n\nexport default function CreateSketch() {\n  const classes = useStyles();\n  const [id, setId] = useState();\n\n  useEffect(() => {\n    axios.get(\"/api/createSketch\").then((res) => {\n      setId(res.data);\n    });\n  }, []);\n\n  return id ? (\n    <Redirect to={id} />\n  ) : (\n    <Backdrop className={classes.backdrop} open>\n      <CircularProgress color=\"inherit\" />\n    </Backdrop>\n  );\n}\n","import React, { useEffect } from \"react\";\n\nconst bridgeScript = `\n  window.onerror = function (text, url, row, column, error) {\n    const payload = row + \":\" + column + \" \" + text;\n    window.parent.postMessage({ source: \"code-tutor-bridge\", payload}, '*');\n    return true;\n  };\n\n  var console = {\n    log: function () {\n      let payload = \"\";\n\n      for(idx = 0; idx < arguments.length; idx++) {\n        payload += arguments[idx];\n      };\n\n      window.parent.postMessage({ source: \"code-tutor-bridge\", payload }, '*');\n    }\n  };\n  `.replace(/\\n/g, \"\");\n\nexport default function Sketch({ value, setLog }) {\n  useEffect(() => {\n    function eventHandler(message) {\n      if (message.data.source === \"code-tutor-bridge\") {\n        const { payload } = message.data;\n        if (typeof payload === \"string\") {\n          setLog((log) => [...log, payload]);\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", eventHandler);\n\n    return () => {\n      window.removeEventListener(\"message\", eventHandler);\n    };\n  }, [setLog]);\n\n  const parser = new DOMParser();\n\n  const srcDoc = parser.parseFromString(\n    \"<html><head></head><body></body></html>\",\n    \"text/html\"\n  );\n\n  const style = srcDoc.createElement(\"style\");\n  style.type = \"text/css\";\n  style.innerHTML = \"body { margin: 0px; padding 0px; font-size: 0 }\";\n  srcDoc.head.appendChild(style);\n\n  const p5 = srcDoc.createElement(\"script\");\n  p5.src = \"https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.js\";\n  srcDoc.head.appendChild(p5);\n\n  const bridge = srcDoc.createElement(\"script\");\n  bridge.innerHTML = bridgeScript;\n  srcDoc.head.appendChild(bridge);\n\n  const sketch = srcDoc.createElement(\"script\");\n  sketch.innerHTML = value;\n  srcDoc.head.appendChild(sketch);\n\n  return (\n    <iframe\n      title=\"sketch\"\n      srcDoc={srcDoc.documentElement.outerHTML}\n      frameBorder={0}\n      style={{ width: \"100%\", height: \"100%\" }}\n      sandbox=\"allow-scripts allow-pointer-lock allow-same-origin allow-popups allow-forms allow-modals\"\n    />\n  );\n}\n","import React, { useEffect, useRef } from \"react\";\nimport { diffChars } from \"diff\";\n\nimport AceEditor from \"react-ace\";\nimport \"ace-builds/src-noconflict/mode-javascript\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport \"ace-builds/webpack-resolver.js\";\n\nimport { useShare } from \"./Share\";\n\nexport default function Editor() {\n  const { value, submitOp } = useShare();\n  const { code } = value || {};\n  const codeRef = useRef(null);\n\n  useEffect(() => {\n    codeRef.current = code;\n  }, [value]);\n\n  const handleChange = (newValue) => {\n    console.log(newValue);\n    const diff = diffChars(codeRef.current, newValue.replace(/\\r\\n/g, \"\\n\"));\n\n    let offset = 0;\n    diff.forEach(({ count, value, added, removed }) => {\n      if (added) {\n        submitOp({ p: [\"code\", offset], si: value });\n      } else if (removed) {\n        submitOp({ p: [\"code\", offset], sd: value });\n      }\n\n      if (!removed) offset += count;\n    });\n  };\n\n  return (\n    <AceEditor\n      mode=\"javascript\"\n      theme=\"github\"\n      defaultValue={code}\n      value={code}\n      tabSize={2}\n      onChange={handleChange}\n      debounceChangePeriod={50}\n      annotations={[]}\n      width=\"100%\"\n      height=\"100%\"\n    />\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { List, ListItem, ListItemText } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    height: \"100%\",\n    width: \"100%\",\n    overflow: \"auto\",\n  },\n  text: {\n    fontFamily: \"monospace\",\n    whiteSpace: \"pre-line\",\n  },\n}));\n\nexport default function Log({ value }) {\n  const classes = useStyles();\n  const [atBottom, setAtBottom] = useState(true);\n  const logRef = useRef(null);\n\n  useEffect(() => {\n    if (logRef.current) {\n      if (atBottom) {\n        logRef.current.scrollTop = logRef.current.scrollHeight;\n      }\n    }\n  }, [value, logRef, atBottom]);\n\n  const handleScroll = (event) => {\n    const { target } = event;\n    setAtBottom(target.scrollTop === target.scrollHeight - target.offsetHeight);\n  };\n\n  return (\n    <List className={classes.list} ref={logRef} onScroll={handleScroll}>\n      {(value || []).map((entry, idx) => (\n        <ListItem dense divider key={idx}>\n          <ListItemText\n            primaryTypographyProps={{ className: classes.text }}\n            primary={entry}\n          />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport { AppBar, Toolbar, IconButton, Grid, Paper } from \"@material-ui/core\";\n\nimport { PlayArrow, Stop } from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { useShare } from \"./Share\";\n\nimport Sketch from \"./Sketch\";\nimport Editor from \"./Editor\";\nimport Log from \"./Log\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    height: \"100vh\",\n  },\n  main: {\n    flexGrow: 1,\n    display: \"flex\",\n  },\n  appBarSpacer: {\n    flexGrow: 0,\n    flexShrink: 0,\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n    display: \"flex\",\n  },\n  leftColumn: {\n    flexGrow: 0.5,\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  rightColumn: {\n    flexGrow: 0.5,\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  editorContainer: {\n    flexGrow: 0.8,\n  },\n  logContainer: {\n    flexGrow: 0.2,\n  },\n  paper: {\n    height: \"100%\",\n  },\n}));\n\nexport default function Ide() {\n  const classes = useStyles();\n  const { value } = useShare() || {};\n  const { code } = value || {};\n  const codeRef = useRef(null);\n\n  useEffect(() => {\n    codeRef.current = code;\n  }, [code]);\n\n  const [sketch, setSketch] = useState(\"\");\n  const [log, setLog] = useState([]);\n\n  const startSketch = () => {\n    setSketch(codeRef.current);\n  };\n\n  const stopSketch = () => {\n    setSketch(\"\");\n  };\n\n  useEffect(() => {\n    if (sketch) {\n      setLog([\"Starting Sketch...\"]);\n    } else {\n      setLog((log) => [...log, \"Sketch Stopped.\"]);\n    }\n  }, [sketch]);\n\n  return (\n    <div className={classes.root}>\n      <AppBar>\n        <Toolbar className={classes.toolbar}>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={startSketch}>\n            <PlayArrow />\n          </IconButton>\n          <IconButton color=\"inherit\" onClick={stopSketch}>\n            <Stop />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <main className={classes.main}>\n        <div className={classes.appBarSpacer} />\n        <div className={classes.content}>\n          <div className={classes.leftColumn}>\n            <div className={classes.editorContainer}>\n              <Paper className={classes.paper} variant=\"outlined\">\n                <Editor />\n              </Paper>\n            </div>\n            <div className={classes.logContainer}>\n              <Paper className={classes.paper} variant=\"outlined\">\n                <Log value={log} />\n              </Paper>\n            </div>\n          </div>\n          <div className={classes.rightColumn}>\n            <Paper className={classes.paper} variant=\"outlined\">\n              <Sketch value={sketch} setLog={setLog} />\n            </Paper>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { CssBaseline } from \"@material-ui/core\";\n\nimport Share from \"./Share\";\nimport CreateSketch from \"./CreateSketch\";\nimport Ide from \"./Ide\";\n\nexport default function App() {\n  return (\n    <>\n      <CssBaseline />\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <CreateSketch />\n          </Route>\n          <Route path=\"/:id\">\n            <Share>\n              <Ide />\n            </Share>\n          </Route>\n        </Switch>\n      </Router>\n    </>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}